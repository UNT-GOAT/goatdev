<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>YOLO Augmented Data Viewer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f7f9fb;
      }
      .viewer-container {
        max-width: 90vw;
        margin: 0 auto;
        padding: 20px;
      }
      /* Updated styling for responsiveness and reduced size */
      #canvasContainer {
        position: relative;
        display: inline-block;
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        overflow: hidden;
        background-color: #fff;
        /* Constrain size on large screens but stay responsive */
        max-width: 800px;
        width: 100%;
        margin: 0 auto; /* Center it */
      }
      canvas {
        display: block;
        /* Ensure the canvas scales visually to fit the container */
        max-width: 100%;
        height: auto;
      }
    </style>
  </head>
  <body>
    <div class="viewer-container">
      <header class="text-center mb-8">
        <h1 class="text-3xl font-bold text-gray-800">
          Augmented Data Mask Viewer
        </h1>
        <p class="text-sm text-gray-500">
          Verify masks for the
          <code class="bg-yellow-100 p-1 rounded">aug_output/train</code> split.
        </p>
      </header>

      <div class="flex flex-col items-center space-y-4">
        <!-- File Info & Path Display -->
        <div
          class="w-full md:w-3/4 bg-white p-4 rounded-lg shadow-md border border-gray-200"
        >
          <p class="text-xs font-semibold text-gray-600 uppercase">
            Current File
          </p>
          <div
            class="text-lg font-medium text-gray-800 break-words"
            id="fileNameDisplay"
          ></div>
          <p class="text-xs mt-2 text-red-600" id="statusMessage">Loading...</p>
          <p class="text-xs mt-4 text-gray-500">
            <span class="font-bold">Navigation:</span> Use Previous/Next
            buttons, or keyboard arrows (←/→) and the 'N' key.
          </p>
        </div>

        <!-- Canvas Display Area -->
        <div id="canvasContainer">
          <canvas id="maskCanvas"></canvas>
        </div>

        <!-- Navigation Buttons -->
        <div class="flex space-x-4 pt-4">
          <button
            id="prevBtn"
            class="px-6 py-2 bg-indigo-500 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-600 transition disabled:opacity-50"
            disabled
          >
            Previous (←)
          </button>
          <button
            id="nextBtn"
            class="px-6 py-2 bg-indigo-500 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-600 transition disabled:opacity-50"
            disabled
          >
            Next (→ / N)
          </button>
        </div>
      </div>
    </div>

    <script>
      // --- CONFIGURATION ---
      const BASE_PATH = "aug_output";
      const SUBSET = "train";

      // --- STATE & UTILITIES ---
      const canvas = document.getElementById("maskCanvas");
      const ctx = canvas.getContext("2d");
      const fileNameDisplay = document.getElementById("fileNameDisplay");
      const statusMessage = document.getElementById("statusMessage");
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");

      let fileIndex = 0;
      let fileStems = [];

      /**
       * Tries to fetch a file, with error handling for network/CORS issues.
       * Implements exponential backoff for transient network issues.
       */
      async function safeFetch(url, maxRetries = 3) {
        for (let attempt = 0; attempt < maxRetries; attempt++) {
          try {
            const response = await fetch(url);
            if (response.ok) {
              return response;
            }
            if (response.status === 404) {
              throw new Error(`404 Not Found: ${url}`);
            }
            // For other errors, log and retry
            console.warn(
              `Attempt ${attempt + 1}: Failed to fetch ${url}. Status: ${
                response.status
              }`
            );
          } catch (error) {
            // Log non-404 errors and retry
            if (error.message.includes("404")) throw error;
            console.warn(
              `Attempt ${attempt + 1}: Network Error for ${url}. Retrying...`,
              error.message
            );
          }
          // Wait with exponential backoff before next retry
          await new Promise((resolve) =>
            setTimeout(resolve, Math.pow(2, attempt) * 500)
          );
        }
        throw new Error(`Failed to fetch ${url} after ${maxRetries} attempts.`);
      }

      /**
       * Draws the image and overlays the YOLO masks.
       */
      async function renderCurrentFile() {
        if (fileStems.length === 0) {
          statusMessage.textContent =
            "Error: No files found. Check BASE_PATH and file list setup.";
          return;
        }

        const stem = fileStems[fileIndex];
        const imagePath = `${BASE_PATH}/${SUBSET}/images/${stem}.jpg`;
        const labelPath = `${BASE_PATH}/${SUBSET}/labels/${stem}.txt`;

        fileNameDisplay.textContent = `${stem}.jpg (${fileIndex + 1} of ${
          fileStems.length
        })`;
        statusMessage.textContent = "Loading image and label...";

        try {
          // 1. Load Image
          const img = new Image();
          img.onload = async () => {
            // Resize Canvas to Image Size (Native Resolution)
            canvas.width = img.width;
            canvas.height = img.height;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw Image
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

            // 2. Load Label (YOLO Polygons)
            const labelResponse = await safeFetch(labelPath);
            const labelText = await labelResponse.text();

            // 3. Draw Polygons
            drawPolygons(labelText, canvas.width, canvas.height);

            statusMessage.textContent = "✅ Ready. Masks overlaid in green.";
            updateNavigationButtons();
          };
          img.onerror = () => {
            statusMessage.textContent = `Error: Could not load image from ${imagePath}.`;
          };
          img.src = imagePath;
        } catch (error) {
          statusMessage.textContent = `Fatal Error loading ${stem}: ${error.message}`;
          updateNavigationButtons();
        }
      }

      /**
       * Parses YOLO format and draws the polygons onto the canvas.
       */
      function drawPolygons(labelText, width, height) {
        const lines = labelText
          .trim()
          .split("\n")
          .filter((line) => line.length > 0);

        // Define drawing style for the masks
        ctx.strokeStyle = "#047857"; // Tailwind green-700
        ctx.lineWidth = 3;
        ctx.fillStyle = "rgba(16, 185, 129, 0.4)"; // Tailwind green-500 with 40% opacity

        lines.forEach((line) => {
          const parts = line.trim().split(/\s+/).map(parseFloat);
          if (parts.length < 7 || isNaN(parts[0])) return; // Needs at least 1 class + 3 coordinate pairs (7 parts total)

          // The rest are normalized x, y coordinates
          const coords = parts.slice(1);

          ctx.beginPath();

          // Start path with the first coordinate pair
          let x0 = coords[0] * width;
          let y0 = coords[1] * height;
          ctx.moveTo(x0, y0);

          // Draw line to all subsequent coordinate pairs
          for (let i = 2; i < coords.length; i += 2) {
            let x = coords[i] * width;
            let y = coords[i + 1] * height;
            ctx.lineTo(x, y);
          }

          ctx.closePath();
          ctx.stroke();
          ctx.fill();
        });
      }

      function updateNavigationButtons() {
        prevBtn.disabled = fileIndex === 0;
        nextBtn.disabled = fileIndex === fileStems.length - 1;
      }

      function goToNext() {
        if (fileIndex < fileStems.length - 1) {
          fileIndex++;
          renderCurrentFile();
        }
      }

      function goToPrev() {
        if (fileIndex > 0) {
          fileIndex--;
          renderCurrentFile();
        }
      }

      /**
       * Handles keyboard input for navigation (N, ArrowRight, ArrowLeft).
       */
      function handleKeyDown(event) {
        if (event.key === "ArrowRight" || event.key === "n") {
          goToNext();
        } else if (event.key === "ArrowLeft") {
          goToPrev();
        }
      }

      /**
       * Initial function to set up the file list (Replace with a proper file listing if possible)
       */
      async function initializeViewer() {
        prevBtn.addEventListener("click", goToPrev);
        nextBtn.addEventListener("click", goToNext);
        window.addEventListener("keydown", handleKeyDown);

        // --- MOCK/PLACEHOLDER FILE LISTING ---
        // IMPORTANT: This list is CORRECTLY populated based on your previous input.

        // find aug_output/train/images -name "*.jpg" | awk -F/ '{print "\"" $NF "\","}' | sed 's/\.jpg//g'

        const placeholderStems = [
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug13",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug3",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug14",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug5",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug3",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug14",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug2",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug15",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug4",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug15",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug2",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug12",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug19",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug10",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug0",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug17",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug8",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug18",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug17",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug0",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug6",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug8",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug9",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug7",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug16",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug1",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug9",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug19",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug16",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug1",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug11",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug18",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug15",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug5",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug12",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug5",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug12",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug3",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug18",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug19",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug2",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug4",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug13",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug13",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug4",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug14",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug16",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug6",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug11",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug0",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug11",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug6",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug10",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug7",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug1",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug10",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug7",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug17",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug6",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug11",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug4",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug4",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug11",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug15",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug14",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug10",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug5",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug5",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug10",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug7",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug5",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug12",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug7",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug7",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug12",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug16",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug17",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug13",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug6",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug6",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug13",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug4",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug0",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug18",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug17",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug2",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug17",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug2",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug13",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug12",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug3",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug16",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug3",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug16",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug19",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug1",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug3",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug14",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug8",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug1",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug14",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug1",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug10",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug9",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug11",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug8",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug0",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug15",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug0",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug9",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug15",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug2",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug17",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug18",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug4",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug18",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug5",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug4",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug19",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug5",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug19",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug16",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug14",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug7",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug6",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug7",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug6",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug15",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug9",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug11",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug2",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug3",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug2",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug3",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug10",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug8",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug12",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug1",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug8",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug8",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug0",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug19",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug1",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug18",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug9",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67_aug9",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug0",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66_aug13",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug13",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug2",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug12",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug2",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug17",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug16",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug3",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug3",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug13",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug12",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug10",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug19",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug9",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug11",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug1",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug9",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug14",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug1",
          "IMG_20251113_095006047_HDR_jpg.rf.37ef9da9a84d1115cba1a4e07d5b4f66",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug0",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug15",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug8",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug10",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug0",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug8",
          "IMG_20251113_093118374_jpg.rf.b83ab75a0331d3246753ffa8d722f29a_aug18",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug11",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug15",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug4",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug14",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug11",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug4",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug5",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug10",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug5",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug15",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug14",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug16",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug18",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug17",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug7",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug18",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug9",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug7",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug12",
          "IMG_20251113_093946711_HDR_jpg.rf.869c31ba36a4c1c148862ba7d6ff1c67",
          "IMG_20251113_094158223_HDR_jpg.rf.8a604c668a3ebcda5e9f32bec49900ed_aug13",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug6",
          "IMG_20251113_094643592_HDR_jpg.rf.d0cccafaebd1040b0887ec9f944fd427_aug8",
          "IMG_20251113_094055464_HDR_jpg.rf.812bca7452ab8d4a35e23b0f075e9a78_aug19",
          "IMG_20251113_092948413_HDR_jpg.rf.9615d480f3ce78935f61dc21504828e4_aug16",
          "IMG_20251113_093409199_HDR_jpg.rf.8aa3f6e6b05e862c84ecc5b9f9bace2f_aug6",
          "IMG_20251113_094155911_HDR_jpg.rf.6d3e5a7a21e38d1ee935be5d64ca5b52_aug19",
          "IMG_20251113_095053148_HDR_jpg.rf.e6ced9e476f5ee5520c2cbbb6da07f12_aug17",
        ];
        // --- END PLACEHOLDER LIST ---

        fileStems = placeholderStems;

        if (fileStems.length === 0) {
          statusMessage.textContent =
            "Configuration Error: fileStems list is empty. Please populate it with your actual file names.";
          return;
        }

        fileIndex = 0;
        renderCurrentFile();
      }

      // Start the application
      initializeViewer();
    </script>
  </body>
</html>
